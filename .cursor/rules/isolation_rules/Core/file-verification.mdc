---
description: Optimized file verification
globs: file-verification.mdc
alwaysApply: false
---
# ä¼˜åŒ–çš„æ–‡ä»¶éªŒè¯ç³»ç»Ÿ

> **ç®€è¦è¯´æ˜ï¼š** è¯¥ç³»ç»Ÿä½¿ç”¨æ‰¹å¤„ç†æ“ä½œå’Œå¹³å°ä¼˜åŒ–å‘½ä»¤é«˜æ•ˆéªŒè¯å’Œåˆ›å»ºæ‰€éœ€çš„Memory Bankæ–‡ä»¶ç»“æ„ã€‚

## ğŸ” ä¼˜åŒ–çš„æ–‡ä»¶éªŒè¯å·¥ä½œæµ

```mermaid
graph TD
    Start["å¼€å§‹æ–‡ä»¶<br>éªŒè¯"] --> VerifyAll["éªŒè¯æ‰€æœ‰<br>å¿…éœ€ç»„ä»¶"]
    VerifyAll --> MissingCheck{"ç¼ºå¤±<br>ç»„ä»¶ï¼Ÿ"}
    MissingCheck -->|"æ˜¯"| BatchCreate["æ‰¹é‡åˆ›å»º<br>æ‰€æœ‰ç¼ºå¤±é¡¹"]
    MissingCheck -->|"å¦"| Complete["éªŒè¯<br>å®Œæˆ"]
    BatchCreate --> Report["ç”Ÿæˆ<br>éªŒè¯æŠ¥å‘Š"]
    Report --> Complete
```

## ğŸ“‹ ä¼˜åŒ–çš„ç›®å½•åˆ›å»º

```mermaid
graph TD
    Start["ç›®å½•<br>åˆ›å»º"] --> DetectOS["æ£€æµ‹æ“ä½œ<br>ç³»ç»Ÿ"]
    DetectOS -->|"Windows"| WinCmd["æ‰¹é‡åˆ›å»º<br>Windowså‘½ä»¤"]
    DetectOS -->|"Mac/Linux"| UnixCmd["æ‰¹é‡åˆ›å»º<br>Unixå‘½ä»¤"]
    WinCmd & UnixCmd --> Verify["éªŒè¯<br>åˆ›å»ºæˆåŠŸ"]
    Verify --> Complete["ç›®å½•è®¾ç½®<br>å®Œæˆ"]
```

### å¹³å°ç‰¹å®šå‘½ä»¤

#### Windows (PowerShell)
```powershell
# ä¸€æ¬¡æ€§åˆ›å»ºæ‰€æœ‰ç›®å½•
mkdir memory-bank, docs, docs\archive -ErrorAction SilentlyContinue

# åˆ›å»ºæ‰€æœ‰å¿…éœ€æ–‡ä»¶
$files = @(".cursorrules", "tasks.md", 
           "memory-bank\projectbrief.md", 
           "memory-bank\productContext.md",
           "memory-bank\systemPatterns.md",
           "memory-bank\techContext.md",
           "memory-bank\activeContext.md",
           "memory-bank\progress.md")

foreach ($file in $files) {
    if (-not (Test-Path $file)) {
        New-Item -Path $file -ItemType File -Force
    }
}
```

#### Mac/Linux (Bash)
```bash
# ä¸€æ¬¡æ€§åˆ›å»ºæ‰€æœ‰ç›®å½•
mkdir -p memory-bank docs/archive

# åˆ›å»ºæ‰€æœ‰å¿…éœ€æ–‡ä»¶
touch .cursorrules tasks.md \
      memory-bank/projectbrief.md \
      memory-bank/productContext.md \
      memory-bank/systemPatterns.md \
      memory-bank/techContext.md \
      memory-bank/activeContext.md \
      memory-bank/progress.md
```

## ğŸ“ ç®€åŒ–çš„éªŒè¯æµç¨‹

ä¸æ˜¯å•ç‹¬æ£€æŸ¥æ¯ä¸ªç»„ä»¶ï¼Œè€Œæ˜¯æ‰§è¡Œæ‰¹é‡éªŒè¯ï¼š

```powershell
# Windows - PowerShell
$requiredDirs = @("memory-bank", "docs", "docs\archive")
$requiredFiles = @(".cursorrules", "tasks.md")
$mbFiles = @("projectbrief.md", "productContext.md", "systemPatterns.md", 
             "techContext.md", "activeContext.md", "progress.md")

$missingDirs = $requiredDirs | Where-Object { -not (Test-Path $_) -or -not (Test-Path $_ -PathType Container) }
$missingFiles = $requiredFiles | Where-Object { -not (Test-Path $_) -or (Test-Path $_ -PathType Container) }
$missingMBFiles = $mbFiles | ForEach-Object { "memory-bank\$_" } | 
                  Where-Object { -not (Test-Path $_) -or (Test-Path $_ -PathType Container) }

if ($missingDirs.Count -eq 0 -and $missingFiles.Count -eq 0 -and $missingMBFiles.Count -eq 0) {
    Write-Output "âœ“ æ‰€æœ‰å¿…éœ€ç»„ä»¶å·²éªŒè¯"
} else {
    # ä¸€æ¬¡æ€§åˆ›å»ºæ‰€æœ‰ç¼ºå¤±é¡¹
    if ($missingDirs.Count -gt 0) {
        $missingDirs | ForEach-Object { mkdir $_ -Force }
    }
    if ($missingFiles.Count -gt 0 -or $missingMBFiles.Count -gt 0) {
        $allMissingFiles = $missingFiles + $missingMBFiles
        $allMissingFiles | ForEach-Object { New-Item -Path $_ -ItemType File -Force }
    }
}
```

## ğŸ“ æ¨¡æ¿åˆå§‹åŒ–

ä½¿ç”¨å•ä¸ªè„šæœ¬ä¼˜åŒ–æ¨¡æ¿åˆ›å»ºï¼š

```powershell
# Windows - PowerShell
$templates = @{
    "tasks.md" = @"
# Memory Bank: ä»»åŠ¡

## å½“å‰ä»»åŠ¡
[ä»»åŠ¡å°šæœªå®šä¹‰]

## çŠ¶æ€
- [ ] ä»»åŠ¡å®šä¹‰
- [ ] å®æ–½è®¡åˆ’
- [ ] æ‰§è¡Œ
- [ ] æ–‡æ¡£

## éœ€æ±‚
[å°šæœªå®šä¹‰éœ€æ±‚]
"@

    "memory-bank\activeContext.md" = @"
# Memory Bank: æ´»è·ƒä¸Šä¸‹æ–‡

## å½“å‰ç„¦ç‚¹
[æœªå®šä¹‰æ´»è·ƒç„¦ç‚¹]

## çŠ¶æ€
[æœªå®šä¹‰çŠ¶æ€]

## æœ€æ–°å˜æ›´
[æœªè®°å½•å˜æ›´]
"@

    # åœ¨æ­¤æ·»åŠ å…¶ä»–æ¨¡æ¿
}

foreach ($file in $templates.Keys) {
    if (Test-Path $file) {
        Set-Content -Path $file -Value $templates[$file]
    }
}
```

## ğŸ” æ€§èƒ½ä¼˜åŒ–æœ€ä½³å®è·µ

1. **æ‰¹å¤„ç†æ“ä½œ**ï¼šå§‹ç»ˆä½¿ç”¨æ‰¹å¤„ç†æ“ä½œè€Œä¸æ˜¯å•ä¸ªå‘½ä»¤
   ```
   # å¥½ï¼šä¸€æ¬¡æ€§åˆ›å»ºæ‰€æœ‰ç›®å½•
   mkdir memory-bank docs docs\archive
   
   # åï¼šé€ä¸ªåˆ›å»ºç›®å½•
   mkdir memory-bank
   mkdir docs
   mkdir docs\archive
   ```

2. **é¢„æ£€æŸ¥ä¼˜åŒ–**ï¼šé¦–å…ˆæ£€æŸ¥æ‰€æœ‰éœ€æ±‚ï¼Œç„¶ååªåˆ›å»ºç¼ºå¤±çš„
   ```
   # é¦–å…ˆæ£€æŸ¥ç¼ºå¤±é¡¹
   $missingItems = ...
   
   # ç„¶ååªåˆ›å»ºç¼ºå¤±çš„
   if ($missingItems) { ... }
   ```

3. **é”™è¯¯å¤„ç†**ï¼šåœ¨æ‰€æœ‰å‘½ä»¤ä¸­åŒ…å«é”™è¯¯å¤„ç†
   ```
   mkdir memory-bank, docs, docs\archive -ErrorAction SilentlyContinue
   ```

4. **å¹³å°é€‚é…**ï¼šè‡ªåŠ¨æ£€æµ‹å¹³å°å¹¶ä½¿ç”¨é€‚å½“å‘½ä»¤
   ```
   if ($IsWindows) {
       # Windowså‘½ä»¤
   } else {
       # Unixå‘½ä»¤
   }
   ```

5. **ä¸€æ¬¡æ€§éªŒè¯**ï¼šåœ¨å•æ¬¡é€šè¿‡ä¸­éªŒè¯ç›®å½•ç»“æ„
   ```
   $requiredPaths = @("memory-bank", "docs", "docs\archive", ".cursorrules", "tasks.md")
   $missingPaths = $requiredPaths | Where-Object { -not (Test-Path $_) }
   ```

## ğŸ“ éªŒè¯æŠ¥å‘Šæ ¼å¼

```
âœ… éªŒè¯å®Œæˆ
- åˆ›å»ºçš„ç›®å½•ï¼š[åˆ—è¡¨]
- åˆ›å»ºçš„æ–‡ä»¶ï¼š[åˆ—è¡¨]
- æ‰€æœ‰ç»„ä»¶å·²éªŒè¯

Memory Bankç³»ç»Ÿå‡†å¤‡å°±ç»ªã€‚
``` 