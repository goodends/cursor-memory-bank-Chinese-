---
description: main rule
globs: main.mdc
alwaysApply: false
---
# ğŸ” éš”ç¦»èšç„¦è®°å¿†åº“ç³»ç»Ÿ

ğŸš¨ å…³é”®è§„åˆ™ï¼šè®°å¿†åº“åˆ›å»ºæ˜¯å¼ºåˆ¶æ€§çš„ ğŸš¨
è®°å¿†åº“å¿…é¡»åœ¨ä»»ä½•æ¨¡å¼ä¸‹çš„ä»»ä½•å…¶ä»–æ“ä½œä¹‹å‰åˆ›å»º
æ²¡æœ‰éªŒè¯è®°å¿†åº“å­˜åœ¨ï¼Œä»»ä½•æµç¨‹éƒ½ä¸èƒ½ç»§ç»­

> **ç®€è¦è¯´æ˜ï¼š** æ­¤ç³»ç»Ÿè®¾è®¡ç”¨äºä¸Cursorè‡ªå®šä¹‰æ¨¡å¼é…åˆå·¥ä½œï¼Œæ¯ä¸ªæ¨¡å¼åªåŠ è½½å…¶éœ€è¦çš„è§„åˆ™ã€‚ç³»ç»Ÿä½¿ç”¨å¯è§†åŒ–Mermaidå›¾è¡¨å’Œé€‰æ‹©æ€§æ–‡æ¡£åŠ è½½æ¥ä¼˜åŒ–ä¸Šä¸‹æ–‡ä½¿ç”¨ã€‚

## ğŸ§­ æ¨¡å¼ç‰¹å®šå¯è§†åŒ–åœ°å›¾

```mermaid
graph TD
    subgraph Modes["Cursorè‡ªå®šä¹‰æ¨¡å¼"]
        VAN["VANæ¨¡å¼<br>åˆå§‹åŒ–"] --> PLAN["PLANæ¨¡å¼<br>ä»»åŠ¡è§„åˆ’"]
        PLAN --> Creative["CREATIVEæ¨¡å¼<br>è®¾è®¡å†³ç­–"]
        Creative --> Implement["IMPLEMENTæ¨¡å¼<br>ä»£ç å®æ–½"]
        Implement --> Reflect["REFLECTæ¨¡å¼<br>ä»»åŠ¡å®¡æŸ¥"]
        Reflect --> Archive["ARCHIVEæ¨¡å¼<br>æ–‡æ¡£è®°å½•"]
    end
    
    VAN -.->|"åŠ è½½"| VANRules["â€¢ main.md<br>â€¢ platform-awareness.md<br>â€¢ file-verification.md<br>â€¢ workflow-init.md"]
    PLAN -.->|"åŠ è½½"| PLANRules["â€¢ main.md<br>â€¢ task-tracking.md<br>â€¢ planning-process.md"]
    Creative -.->|"åŠ è½½"| CreativeRules["â€¢ main.md<br>â€¢ creative-phase.md<br>â€¢ design-patterns.md"]
    Implement -.->|"åŠ è½½"| ImplementRules["â€¢ main.md<br>â€¢ command-execution.md<br>â€¢ implementation-guide.md"]
    Reflect -.->|"åŠ è½½"| ReflectRules["â€¢ main.md<br>â€¢ reflection-format.md"]
    Archive -.->|"åŠ è½½"| ArchiveRules["â€¢ main.md<br>â€¢ archiving-guide.md"]
```

## ğŸ“‹ è®°å¿†åº“éªŒè¯ - æ‰€æœ‰æ¨¡å¼ä¸­å¼ºåˆ¶æ‰§è¡Œ

```mermaid
graph TD
    Start["æ¨¡å¼æ¿€æ´»"] --> CheckMemBank{"è®°å¿†åº“<br>å­˜åœ¨ï¼Ÿ"}
    
    CheckMemBank -->|"å¦"| CreateMemBank["åˆ›å»ºè®°å¿†åº“<br>[å…³é”®æ­¥éª¤]"]
    CheckMemBank -->|"æ˜¯"| VerifyMemBank["éªŒè¯è®°å¿†åº“<br>ç»“æ„"]
    
    CreateMemBank --> VerifyCreation{"åˆ›å»º<br>æˆåŠŸï¼Ÿ"}
    VerifyCreation -->|"å¦"| AbortAll["â›” ä¸­æ­¢æ‰€æœ‰æ“ä½œ<br>é¦–å…ˆä¿®å¤è®°å¿†åº“"]
    VerifyCreation -->|"æ˜¯"| VerifyMemBank
    
    VerifyMemBank --> StructureCheck{"ç»“æ„<br>æœ‰æ•ˆï¼Ÿ"}
    StructureCheck -->|"å¦"| FixStructure["ä¿®å¤è®°å¿†åº“<br>ç»“æ„"]
    StructureCheck -->|"æ˜¯"| ContinueMode["ç»§ç»­æ¨¡å¼<br>æ“ä½œ"]
    
    FixStructure --> VerifyFix{"ä¿®å¤<br>æˆåŠŸï¼Ÿ"}
    VerifyFix -->|"å¦"| AbortAll
    VerifyFix -->|"æ˜¯"| ContinueMode
    
    style CheckMemBank fill:#ff0000,stroke:#990000,color:white,stroke-width:3px
    style CreateMemBank fill:#ff0000,stroke:#990000,color:white,stroke-width:3px
    style VerifyCreation fill:#ff0000,stroke:#990000,color:white,stroke-width:3px
    style AbortAll fill:#ff0000,stroke:#990000,color:white,stroke-width:3px
    style StructureCheck fill:#ff0000,stroke:#990000,color:white,stroke-width:3px
    style FixStructure fill:#ff5555,stroke:#dd3333,color:white
    style VerifyFix fill:#ff5555,stroke:#dd3333,color:white
```

## ğŸ“š å¯è§†åŒ–æµç¨‹åœ°å›¾

æ¯ä¸ªæ¨¡å¼éƒ½æœ‰è‡ªå·±çš„å¯è§†åŒ–æµç¨‹åœ°å›¾ï¼š

- @VANæ¨¡å¼åœ°å›¾
- @PLANæ¨¡å¼åœ°å›¾
- @CREATIVEæ¨¡å¼åœ°å›¾
- @IMPLEMENTæ¨¡å¼åœ°å›¾
- @REFLECTæ¨¡å¼åœ°å›¾
- @ARCHIVEæ¨¡å¼åœ°å›¾

## ğŸ”„ æ–‡ä»¶çŠ¶æ€éªŒè¯

åœ¨è¿™ç§éš”ç¦»èšç„¦æ–¹æ³•ä¸­ï¼Œè®°å¿†åº“æ–‡ä»¶åœ¨æ¨¡å¼ä¹‹é—´ä¿æŒè¿ç»­æ€§ï¼š

```mermaid
graph TD
    subgraph "è®°å¿†åº“æ–‡ä»¶"
        tasks["tasks.md<br>çœŸå®æ¥æº"]
        active["activeContext.md<br>å½“å‰ç„¦ç‚¹"]
        creative["creative-*.md<br>è®¾è®¡å†³ç­–"]
        progress["progress.md<br>å®æ–½çŠ¶æ€"]
    end
    
    VAN["VANæ¨¡å¼"] -->|"åˆ›å»º/æ›´æ–°"| tasks
    VAN -->|"åˆ›å»º/æ›´æ–°"| active
    
    PLAN["PLANæ¨¡å¼"] -->|"è¯»å–"| tasks
    PLAN -->|"è¯»å–"| active
    PLAN -->|"æ›´æ–°"| tasks
    
    Creative["CREATIVEæ¨¡å¼"] -->|"è¯»å–"| tasks
    Creative -->|"åˆ›å»º"| creative
    Creative -->|"æ›´æ–°"| tasks
    
    Implement["IMPLEMENTæ¨¡å¼"] -->|"è¯»å–"| tasks
    Implement -->|"è¯»å–"| creative
    Implement -->|"æ›´æ–°"| tasks
    Implement -->|"æ›´æ–°"| progress
    
    Reflect["REFLECTæ¨¡å¼"] -->|"è¯»å–"| tasks
    Reflect -->|"è¯»å–"| progress
    Reflect -->|"æ›´æ–°"| tasks
    
    Archive["ARCHIVEæ¨¡å¼"] -->|"è¯»å–"| tasks
    Archive -->|"è¯»å–"| progress
    Archive -->|"å½’æ¡£"| creative
```

## ğŸ“‹ æ¨¡å¼è½¬æ¢åè®®

```mermaid
sequenceDiagram
    participant User as ç”¨æˆ·
    participant CurrentMode as å½“å‰æ¨¡å¼
    participant NextMode as ä¸‹ä¸€æ¨¡å¼
    
    CurrentMode->>CurrentMode: å®Œæˆé˜¶æ®µéœ€æ±‚
    CurrentMode->>User: "é˜¶æ®µå®Œæˆã€‚ä¸‹ä¸€æ¨¡å¼ï¼š[æ¨¡å¼åç§°]"
    User->>CurrentMode: ç»“æŸå½“å‰æ¨¡å¼
    User->>NextMode: å¯åŠ¨ä¸‹ä¸€æ¨¡å¼
    NextMode->>NextMode: éªŒè¯æ‰€éœ€æ–‡ä»¶çŠ¶æ€
    
    alt æ–‡ä»¶çŠ¶æ€æœ‰æ•ˆ
        NextMode->>User: "ä»ä¸Šä¸€æ¨¡å¼ç»§ç»­..."
    else æ–‡ä»¶çŠ¶æ€æ— æ•ˆ
        NextMode->>User: "æ‰€éœ€æ–‡ä»¶ä¸åœ¨é¢„æœŸçŠ¶æ€"
        NextMode->>User: "è¿”å›[ä¸Šä¸€æ¨¡å¼]å®Œæˆéœ€æ±‚"
    end
```

## ğŸ’» å¹³å°ç‰¹å®šå‘½ä»¤

| æ“ä½œ | Windows | Mac/Linux |
|------|---------|-----------|
| åˆ›å»ºæ–‡ä»¶ | `echo. > file.ext` | `touch file.ext` |
| åˆ›å»ºç›®å½• | `mkdir directory` | `mkdir -p directory` |
| æ›´æ”¹ç›®å½• | `cd directory` | `cd directory` |
| åˆ—å‡ºæ–‡ä»¶ | `dir` | `ls` |
| æ˜¾ç¤ºæ–‡ä»¶å†…å®¹ | `type file.ext` | `cat file.ext` |

## âš ï¸ å‘½ä»¤æ•ˆç‡æŒ‡å¯¼

ä¸ºäº†è·å¾—æœ€ä½³æ€§èƒ½ï¼Œåœ¨é€‚å½“æ—¶ä½¿ç”¨é«˜æ•ˆçš„å‘½ä»¤é“¾ï¼š

```
# é«˜æ•ˆå‘½ä»¤é“¾ç¤ºä¾‹ï¼š
mkdir -p project/{src,tests,docs} && cd project
grep "TODO" $(find . -name "*.js")
npm install && npm start
```

è¯¦ç»†æŒ‡å¯¼è¯·å‚è€ƒ[command-execution.mdc](mdc:.cursor/rules/isolation_rules/Core/command-execution.mdc)ã€‚ 