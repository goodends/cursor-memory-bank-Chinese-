---
description: Process map for VAN QA minimal build test
globs: build-test.mdc
alwaysApply: false
---
# VAN QAï¼šæœ€å°æ„å»ºæµ‹è¯•

> **ç®€è¦è¯´æ˜ï¼š** æ­¤ç»„ä»¶æ‰§è¡Œæœ€å°æ„å»ºæµ‹è¯•ä»¥ç¡®ä¿æ ¸å¿ƒæ„å»ºåŠŸèƒ½æ­£å¸¸å·¥ä½œã€‚

## 4ï¸âƒ£ æœ€å°æ„å»ºæµ‹è¯•æµç¨‹

```mermaid
graph TD
    Start["æœ€å°æ„å»ºæµ‹è¯•"] --> CreateTest["åˆ›å»ºæœ€å°<br>æµ‹è¯•é¡¹ç›®"]
    CreateTest --> BuildTest["å°è¯•<br>æ„å»º"]
    BuildTest --> BuildStatus{"æ„å»º<br>æˆåŠŸï¼Ÿ"}
    
    BuildStatus -->|"æ˜¯"| RunTest["è¿è¡ŒåŸºæœ¬<br>åŠŸèƒ½æµ‹è¯•"]
    BuildStatus -->|"å¦"| FixBuild["ä¿®å¤æ„å»º<br>é—®é¢˜"]
    FixBuild --> RetryBuild["é‡è¯•æ„å»º"]
    RetryBuild --> BuildStatus
    
    RunTest --> TestStatus{"æµ‹è¯•<br>é€šè¿‡ï¼Ÿ"}
    TestStatus -->|"æ˜¯"| TestSuccess["æœ€å°æ„å»ºæµ‹è¯•<br>âœ… é€šè¿‡"]
    TestStatus -->|"å¦"| FixTest["ä¿®å¤æµ‹è¯•<br>é—®é¢˜"]
    FixTest --> RetryTest["é‡è¯•æµ‹è¯•"]
    RetryTest --> TestStatus
    
    style Start fill:#4da6ff,stroke:#0066cc,color:white
    style TestSuccess fill:#10b981,stroke:#059669,color:white
    style BuildStatus fill:#f6546a,stroke:#c30052,color:white
    style TestStatus fill:#f6546a,stroke:#c30052,color:white
```

### æœ€å°æ„å»ºæµ‹è¯•å®ç°ï¼š
```powershell
# ç¤ºä¾‹ï¼šä¸ºReacté¡¹ç›®æ‰§è¡Œæœ€å°æ„å»ºæµ‹è¯•
function Perform-MinimalBuildTest {
    $buildSuccess = $false
    $testSuccess = $false
    
    # åˆ›å»ºæœ€å°æµ‹è¯•é¡¹ç›®
    $testDir = ".__build_test"
    if (Test-Path $testDir) {
        Remove-Item -Path $testDir -Recurse -Force
    }
    
    try {
        # åˆ›å»ºæœ€å°æµ‹è¯•ç›®å½•
        New-Item -Path $testDir -ItemType Directory | Out-Null
        Push-Location $testDir
        
        # åˆå§‹åŒ–æœ€å°package.json
        @"
{
  "name": "build-test",
  "version": "1.0.0",
  "description": "æœ€å°æ„å»ºæµ‹è¯•",
  "main": "index.js",
  "scripts": {
    "build": "echo æ„å»ºæµ‹è¯•æˆåŠŸ"
  }
}
"@ | Set-Content -Path "package.json"
        
        # å°è¯•æ„å»º
        npm run build | Out-Null
        $buildSuccess = $true
        
        # åˆ›å»ºæœ€å°æµ‹è¯•æ–‡ä»¶
        @"
console.log('æµ‹è¯•æˆåŠŸ');
"@ | Set-Content -Path "index.js"
        
        # è¿è¡ŒåŸºæœ¬æµ‹è¯•
        node index.js | Out-Null
        $testSuccess = $true
        
    } catch {
        Write-Output "âŒ æ„å»ºæµ‹è¯•å¤±è´¥ï¼š$($_.Exception.Message)"
    } finally {
        Pop-Location
        if (Test-Path $testDir) {
            Remove-Item -Path $testDir -Recurse -Force
        }
    }
    
    # æ˜¾ç¤ºç»“æœ
    if ($buildSuccess -and $testSuccess) {
        Write-Output "âœ… æœ€å°æ„å»ºæµ‹è¯•æˆåŠŸé€šè¿‡"
        return $true
    } else {
        if (-not $buildSuccess) {
            Write-Output "âŒ æ„å»ºè¿‡ç¨‹å¤±è´¥"
        }
        if (-not $testSuccess) {
            Write-Output "âŒ åŸºæœ¬åŠŸèƒ½æµ‹è¯•å¤±è´¥"
        }
        return $false
    }
}
```

## ğŸ“‹ æœ€å°æ„å»ºæµ‹è¯•æ£€æŸ¥ç‚¹

```
âœ“ æ£€æŸ¥ç‚¹ï¼šæœ€å°æ„å»ºæµ‹è¯•
- æµ‹è¯•é¡¹ç›®åˆ›å»ºæˆåŠŸï¼Ÿ [æ˜¯/å¦]
- æ„å»ºè¿‡ç¨‹æˆåŠŸå®Œæˆï¼Ÿ [æ˜¯/å¦]
- åŸºæœ¬åŠŸèƒ½æµ‹è¯•é€šè¿‡ï¼Ÿ [æ˜¯/å¦]

â†’ å¦‚æœå…¨éƒ¨æ˜¯ï¼šQAéªŒè¯å®Œæˆï¼Œç»§ç»­ç”ŸæˆæˆåŠŸæŠ¥å‘Šã€‚
â†’ å¦‚æœæœ‰å¦ï¼šåœ¨ç»§ç»­ä¹‹å‰ä¿®å¤æ„å»ºé—®é¢˜ã€‚
```

**ä¸‹ä¸€æ­¥ï¼ˆé€šè¿‡æ—¶ï¼‰ï¼š** åŠ è½½`van-qa-utils/reports.mdc`ç”ŸæˆæˆåŠŸæŠ¥å‘Šã€‚
**ä¸‹ä¸€æ­¥ï¼ˆå¤±è´¥æ—¶ï¼‰ï¼š** æ£€æŸ¥`van-qa-utils/common-fixes.mdc`è·å–æ„å»ºæµ‹è¯•ä¿®å¤ã€‚ 